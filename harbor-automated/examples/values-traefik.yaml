# Example: Harbor with Traefik IngressRoute
# This configuration uses Traefik IngressRoute with Let's Encrypt

# Expose configuration
expose:
  type: traefik
  traefik:
    enabled: true
    host: harbor.example.com  # Change this to your domain
    
    # TLS with Let's Encrypt
    tls:
      enabled: true
      certResolver: le  # Name of your Traefik cert resolver
      # Or use existing secret:
      # secretName: harbor-tls
    
    # HTTPS redirect
    httpsRedirect:
      enabled: true
    
    # IP whitelist (optional)
    ipWhitelist:
      enabled: false
      sourceRange: []
      # Example: Restrict access to specific IPs
      # enabled: true
      # sourceRange:
      #   - 192.168.1.1
      #   - 155.155.155.5
      #   - 10.0.0.0/8
  
  # TLS configuration
  tls:
    enabled: true
    # Note: expose.tls.auto.commonName is NOT required when using Traefik
    # Traefik handles TLS termination, not nginx
    
    # Optional: Add custom middlewares
    # middlewares:
    #   - harbor-ratelimit
    #   - harbor-auth

# External URL (must match the host above)
externalURL: https://harbor.example.com

# Admin password
harborAdminPassword: "Harbor12345"  # Change this!

# Database - Reliza PostgreSQL
relizapostgresql:
  enabled: true
  auth:
    username: harbor
    password: "PostgresPassword123"  # Change this!
    database: registry
  primary:
    persistence:
      enabled: true
      size: 20Gi

database:
  type: internal
  # Connection details (host, username, password, database) are automatically
  # configured from relizapostgresql.auth.* values above

# Persistence
persistence:
  enabled: true
  persistentVolumeClaim:
    registry:
      size: 50Gi
    jobservice:
      size: 5Gi
    trivy:
      size: 5Gi
